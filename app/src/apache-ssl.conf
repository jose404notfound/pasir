<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/html/

    # Redirigir todo el tráfico HTTP a HTTPS
    Redirect permanent / https://fsociety404.com/

    <Directory /var/www/html/>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Redirigir la raíz del sitio a /welcome/
    RedirectMatch ^/$ /welcome/

    # Alias para las rutas de tu aplicación
    Alias /welcome /var/www/html/pages/welcome
    <Directory /var/www/html/pages/welcome>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /home /var/www/html/pages/home
    <Directory /var/www/html/pages/home>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /devops /var/www/html/pages/devops
    <Directory /var/www/html/pages/devops>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /cybersecurity /var/www/html/pages/cybersecurity
    <Directory /var/www/html/pages/cybersecurity>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /filmzone /var/www/html/pages/filmzone
    <Directory /var/www/html/pages/filmzone>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /blog /var/www/html/pages/blog
    <Directory /var/www/html/pages/blog>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /styles /var/www/html/styles
    <Directory /var/www/html/styles>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /utils /var/www/html/utils
    <Directory /var/www/html/utils>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /service /var/www/html/service
    <Directory /var/www/html/service>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /users /var/www/html/pages/home/users/
    <Directory /var/www/html/pages/home/users>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    # Logs de acceso y error
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>

<VirtualHost *:443>
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/html/

    # Habilitar SSL en este VirtualHost
    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/fsociety404.com.crt
    SSLCertificateKeyFile /etc/ssl/private/fsociety404.com.key
    # SSLCertificateChainFile /etc/ssl/certs/chain.pem

    <Directory /var/www/html/>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Redirigir la raíz del sitio a /welcome/
    RedirectMatch ^/$ /welcome/

    # Alias para las rutas de tu aplicación
    Alias /welcome /var/www/html/pages/welcome
    <Directory /var/www/html/pages/welcome>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /home /var/www/html/pages/home
    <Directory /var/www/html/pages/home>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /devops /var/www/html/pages/devops
    <Directory /var/www/html/pages/devops>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /cybersecurity /var/www/html/pages/cybersecurity
    <Directory /var/www/html/pages/cybersecurity>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /filmzone /var/www/html/pages/filmzone
    <Directory /var/www/html/pages/filmzone>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /blog /var/www/html/pages/blog
    <Directory /var/www/html/pages/blog>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /styles /var/www/html/styles
    <Directory /var/www/html/styles>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /utils /var/www/html/utils
    <Directory /var/www/html/utils>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /service /var/www/html/service
    <Directory /var/www/html/service>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    Alias /users /var/www/html/pages/home/users/
    <Directory /var/www/html/pages/home/users>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    # Logs de acceso y error
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
